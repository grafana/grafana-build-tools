#!/bin/sh

set -e
set -u

# The grafana/xk6 image only exists for amd64, so we need to build it for
# the target architecture.
mkdir -p /host/bin "/build/bin/${2}-${3}"
env GOPATH=/host go install "go.k6.io/xk6/cmd/xk6@${1}"
env GOPATH=/build GOOS="${2}" GOARCH="${3}" go install "go.k6.io/xk6/cmd/xk6@${1}"
